#include <stdio.h>
#include <stdlib.h>

int global_not_initialized;
int global_initialized = 5;

void fn_example(){
	/* As you can see, local_not_initialized has the same name that main's */
	int local_not_initialized;
	printf("local_not_initialized (fn_example) @  0x%08x \n", &local_not_initialized);
}

void main(){
	static int static_local_initialized = 5;
	static int static_local_not_initialized;
	int local_not_initialized;
	int * pointer_to_heap_segment_1 = (int *) malloc( sizeof(int) );
	int * pointer_to_heap_segment_2 = (int *) malloc( sizeof(int) );
	
	printf("\n");

	/* Variables stored on memory's data segment.
	 * This segment contains all global/static variables that are, 
	 * necessarily, initialized with any value. */
	printf("+ Data segment \n");
	printf("  global_initialized ........... @ 0x%08x \n", &global_initialized);
	printf("  static_local_initialized ..... @ 0x%08x \n", &static_local_initialized);
	printf("\n");	

	/* Variables stored on memory's bss segment.
	 * This segment contains all global/static variables that were 
	 * not initialized with any value. It is the data segment's opposite. */
	printf("+ BSS segment \n");
	printf("  global_not_initialized ....... @ 0x%08x \n", &global_not_initialized);
	printf("  static_local_not_initialized . @ 0x%08x \n", &static_local_not_initialized);
	printf("\n");

	/* Variables stored on memory's heap segment.
	 * This segment contains all blocks that are allocated by 
	 * alloc/dealloc functions, and it's size is dynamic. */
	printf("+ Heap segment \n");
	printf("  pointer_to_heap_segment_1 .... @ 0x%08x \n", pointer_to_heap_segment_1);
	printf("  pointer_to_heap_segment_2 .... @ 0x%08x \n", pointer_to_heap_segment_2);
	printf("\n");

	/* Variables stored on memory's stack segment.
	 * This segment contains all local variables that belong 
	 * to a specific function. */
	printf("+ Stack segment \n");
	printf("  local_not_initialized ........ @ 0x%08x \n", &local_not_initialized);

	printf("  "); fn_example();

	printf("\n");
}
